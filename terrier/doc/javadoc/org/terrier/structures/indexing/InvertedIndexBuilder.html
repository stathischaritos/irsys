<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.6.0_24) on Thu Jun 16 17:22:59 BST 2011 -->
<TITLE>
InvertedIndexBuilder (Terrier 3.5 API)
</TITLE>

<META NAME="date" CONTENT="2011-06-16">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="InvertedIndexBuilder (Terrier 3.5 API)";
    }
}
</SCRIPT>
<NOSCRIPT>
</NOSCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">
<HR>


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/InvertedIndexBuilder.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/terrier/structures/indexing/FieldLexiconMap.html" title="class in org.terrier.structures.indexing"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/terrier/structures/indexing/InvertedIndexBuilder.IntLongTuple.html" title="class in org.terrier.structures.indexing"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/terrier/structures/indexing/InvertedIndexBuilder.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="InvertedIndexBuilder.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
org.terrier.structures.indexing</FONT>
<BR>
Class InvertedIndexBuilder</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../../resources/inherit.gif" ALT="extended by "><B>org.terrier.structures.indexing.InvertedIndexBuilder</B>
</PRE>
<DL>
<DT><B>Direct Known Subclasses:</B> <DD><A HREF="../../../../org/terrier/structures/indexing/BlockInvertedIndexBuilder.html" title="class in org.terrier.structures.indexing">BlockInvertedIndexBuilder</A></DD>
</DL>
<HR>
<DL>
<DT><PRE>public class <B>InvertedIndexBuilder</B><DT>extends java.lang.Object</DL>
</PRE>

<P>
Builds an inverted index. It optionally saves term-field information as well. 
 <p><b>Algorithm:</b>
 <ol>
 <li>While there are terms left:
  <ol>
  <li>Read M term ids from lexicon, in lexicographical order</li>
  <li>Read the occurrences of these M terms into memory from the direct file</li>
  <li>Write the occurrences of these M terms to the inverted file</li>
  </ol>
 <li>Rewrite the lexicon, removing block frequencies, and adding inverted file offsets</li>
 <li>Write the collection statistics</li>
 </ol>
 <p><b>Lexicon term selection:</b>
 There are two strategies of selecting the number of terms to read from the lexicon. The trade-off here
 is to read a small enough number of terms into memory such that the occurrences of all those terms from
 the direct file can fit in memory. On the other hand, the less terms that are read implies more iterations,
 which is I/O expensive, as the entire direct file has to be read for every iteration.<br>
 The two strategies are:
 <ul>
 <li>Read a fixed number of terms on each iterations - this corresponds to the property
  <tt>invertedfile.processterms</tt></li>
 <li>Read a fixed number of occurrences (pointers) on each iteration. The number of pointers can be determined
  using the sum of frequencies of each term from the lexicon. This corresponds to the property
  <tt>invertedfile.processpointers</tt>. 
 </li></ul>
 By default, the 2nd strategy is chosen, unless the <tt>invertedfile.processpointers</tt> has a zero
 value specified.<P>
 Properties:
 <ul>
  <li><tt>invertedfile.processterms</tt>- the number of terms to process in each iteration. Defaults to 75,000</li>
  <li><tt>invertedfile.processpointers</tt> - the number of pointers to process in each iteration. Defaults to 20,000,000</li>
 </ul>
<P>

<P>
<DL>
<DT><B>Author:</B></DT>
  <DD>Craig Macdonald &amp; Vassilis Plachouras</DD>
</DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->

<A NAME="nested_class_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Nested Class Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;class</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/terrier/structures/indexing/InvertedIndexBuilder.IntLongTuple.html" title="class in org.terrier.structures.indexing">InvertedIndexBuilder.IntLongTuple</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Field Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/terrier/structures/indexing/InvertedIndexBuilder.html#fieldCount">fieldCount</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../org/terrier/compression/BitOut.html" title="interface in org.terrier.compression">BitOut</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/terrier/structures/indexing/InvertedIndexBuilder.html#file">file</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The underlying bit file.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../org/terrier/structures/Index.html" title="class in org.terrier.structures">Index</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/terrier/structures/indexing/InvertedIndexBuilder.html#index">index</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.Class&lt;?&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/terrier/structures/indexing/InvertedIndexBuilder.html#lexiconOutputStream">lexiconOutputStream</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class to be used as a lexiconoutpustream.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected static&nbsp;org.apache.log4j.Logger</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/terrier/structures/indexing/InvertedIndexBuilder.html#logger">logger</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The logger used</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/terrier/structures/indexing/InvertedIndexBuilder.html#numberOfPointersPerIteration">numberOfPointersPerIteration</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The number of pointers to be processed in an interation.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;int</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/terrier/structures/indexing/InvertedIndexBuilder.html#processTerms">processTerms</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The number of terms for which the inverted file 
 is built each time.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/terrier/structures/indexing/InvertedIndexBuilder.html#structureName">structureName</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/terrier/structures/indexing/InvertedIndexBuilder.html#useFieldInformation">useFieldInformation</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Indicates whether field information is used.</TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../../org/terrier/structures/indexing/InvertedIndexBuilder.html#InvertedIndexBuilder(org.terrier.structures.Index, java.lang.String)">InvertedIndexBuilder</A></B>(<A HREF="../../../../org/terrier/structures/Index.html" title="class in org.terrier.structures">Index</A>&nbsp;i,
                     java.lang.String&nbsp;_structureName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;contructor</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="2"><FONT SIZE="+2">
<B>Method Summary</B></FONT></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/terrier/structures/indexing/InvertedIndexBuilder.html#close()">close</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Closes the underlying bit file.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/terrier/structures/indexing/InvertedIndexBuilder.html#createInvertedIndex()">createInvertedIndex</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Creates the inverted index using the already created direct index,
 document index and lexicon.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;gnu.trove.TIntArrayList[]</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/terrier/structures/indexing/InvertedIndexBuilder.html#createPointerForTerm(org.terrier.structures.LexiconEntry)">createPointerForTerm</A></B>(<A HREF="../../../../org/terrier/structures/LexiconEntry.html" title="class in org.terrier.structures">LexiconEntry</A>&nbsp;le)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/terrier/structures/indexing/InvertedIndexBuilder.html#displayMemoryUsage(java.lang.Runtime)">displayMemoryUsage</A></B>(java.lang.Runtime&nbsp;r)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;display memory usage</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../org/terrier/structures/LexiconOutputStream.html" title="class in org.terrier.structures">LexiconOutputStream</A>&lt;java.lang.String&gt;</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/terrier/structures/indexing/InvertedIndexBuilder.html#getLexOutputStream(java.lang.String)">getLexOutputStream</A></B>(java.lang.String&nbsp;_structureName)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get LexiconOutputStream</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../org/terrier/structures/indexing/InvertedIndexBuilder.IntLongTuple.html" title="class in org.terrier.structures.indexing">InvertedIndexBuilder.IntLongTuple</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/terrier/structures/indexing/InvertedIndexBuilder.html#scanLexiconForPointers(long, java.util.Iterator, gnu.trove.TIntIntHashMap, java.util.ArrayList)">scanLexiconForPointers</A></B>(long&nbsp;PointersToProcess,
                       java.util.Iterator&lt;java.util.Map.Entry&lt;java.lang.String,<A HREF="../../../../org/terrier/structures/LexiconEntry.html" title="class in org.terrier.structures">LexiconEntry</A>&gt;&gt;&nbsp;lexiconStream,
                       gnu.trove.TIntIntHashMap&nbsp;codesHashMap,
                       java.util.ArrayList&lt;gnu.trove.TIntArrayList[]&gt;&nbsp;tmpStorageStorage)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Iterates through the lexicon, until it has reached the given number of pointers</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;<A HREF="../../../../org/terrier/structures/indexing/InvertedIndexBuilder.IntLongTuple.html" title="class in org.terrier.structures.indexing">InvertedIndexBuilder.IntLongTuple</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/terrier/structures/indexing/InvertedIndexBuilder.html#scanLexiconForTerms(int, java.util.Iterator, gnu.trove.TIntIntHashMap, gnu.trove.TIntArrayList[][])">scanLexiconForTerms</A></B>(int&nbsp;_processTerms,
                    java.util.Iterator&lt;java.util.Map.Entry&lt;java.lang.String,<A HREF="../../../../org/terrier/structures/LexiconEntry.html" title="class in org.terrier.structures">LexiconEntry</A>&gt;&gt;&nbsp;lexiconStream,
                    gnu.trove.TIntIntHashMap&nbsp;codesHashMap,
                    gnu.trove.TIntArrayList[][]&nbsp;tmpStorage)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Iterates through the lexicon, until it has reached the given number of terms</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/terrier/structures/indexing/InvertedIndexBuilder.html#traverseDirectFile(gnu.trove.TIntIntHashMap, gnu.trove.TIntArrayList[][])">traverseDirectFile</A></B>(gnu.trove.TIntIntHashMap&nbsp;codesHashMap,
                   gnu.trove.TIntArrayList[][]&nbsp;tmpStorage)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Traverses the direct index and creates the inverted index entries 
 for the terms specified in the codesHashMap and tmpStorage.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;long</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../../org/terrier/structures/indexing/InvertedIndexBuilder.html#writeInvertedFilePart(java.io.DataOutputStream, gnu.trove.TIntArrayList[][], int)">writeInvertedFilePart</A></B>(java.io.DataOutputStream&nbsp;dos,
                      gnu.trove.TIntArrayList[][]&nbsp;tmpStorage,
                      int&nbsp;_processTerms)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Writes the section of the inverted file</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TH ALIGN="left"><B>Methods inherited from class java.lang.Object</B></TH>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Field Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="lexiconOutputStream"><!-- --></A><H3>
lexiconOutputStream</H3>
<PRE>
protected java.lang.Class&lt;?&gt; <B>lexiconOutputStream</B></PRE>
<DL>
<DD>class to be used as a lexiconoutpustream. set by this and child classes
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="logger"><!-- --></A><H3>
logger</H3>
<PRE>
protected static final org.apache.log4j.Logger <B>logger</B></PRE>
<DL>
<DD>The logger used
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="fieldCount"><!-- --></A><H3>
fieldCount</H3>
<PRE>
protected int <B>fieldCount</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="useFieldInformation"><!-- --></A><H3>
useFieldInformation</H3>
<PRE>
protected boolean <B>useFieldInformation</B></PRE>
<DL>
<DD>Indicates whether field information is used.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="index"><!-- --></A><H3>
index</H3>
<PRE>
protected <A HREF="../../../../org/terrier/structures/Index.html" title="class in org.terrier.structures">Index</A> <B>index</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="structureName"><!-- --></A><H3>
structureName</H3>
<PRE>
protected java.lang.String <B>structureName</B></PRE>
<DL>
<DL>
</DL>
</DL>
<HR>

<A NAME="numberOfPointersPerIteration"><!-- --></A><H3>
numberOfPointersPerIteration</H3>
<PRE>
protected long <B>numberOfPointersPerIteration</B></PRE>
<DL>
<DD>The number of pointers to be processed in an interation. This directly corresponds to the
 property <tt>invertedfile.processpointers</tt>. If this property is set and > 0, then each
 iteration of the inverted index creation will be done to a set number of pointers, not a set
 number of terms, overriding <tt>invertedfile.processterms</tt>. Default is 20000000.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="file"><!-- --></A><H3>
file</H3>
<PRE>
protected <A HREF="../../../../org/terrier/compression/BitOut.html" title="interface in org.terrier.compression">BitOut</A> <B>file</B></PRE>
<DL>
<DD>The underlying bit file.
<P>
<DL>
</DL>
</DL>
<HR>

<A NAME="processTerms"><!-- --></A><H3>
processTerms</H3>
<PRE>
protected int <B>processTerms</B></PRE>
<DL>
<DD>The number of terms for which the inverted file 
 is built each time. The corresponding property
 is <tt>invertedfile.processterms</tt> and the 
 default value is <tt>75000</tt>. The higher the
 value, the greater the requirements for memory are, 
 but the less time it takes to invert the direct 
 file.
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="InvertedIndexBuilder(org.terrier.structures.Index, java.lang.String)"><!-- --></A><H3>
InvertedIndexBuilder</H3>
<PRE>
public <B>InvertedIndexBuilder</B>(<A HREF="../../../../org/terrier/structures/Index.html" title="class in org.terrier.structures">Index</A>&nbsp;i,
                            java.lang.String&nbsp;_structureName)</PRE>
<DL>
<DD>contructor
<P>
<DL>
<DT><B>Parameters:</B><DD><CODE>i</CODE> - <DD><CODE>_structureName</CODE> - </DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TH ALIGN="left" COLSPAN="1"><FONT SIZE="+2">
<B>Method Detail</B></FONT></TH>
</TR>
</TABLE>

<A NAME="close()"><!-- --></A><H3>
close</H3>
<PRE>
public void <B>close</B>()
           throws java.io.IOException</PRE>
<DL>
<DD>Closes the underlying bit file.
<P>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="createInvertedIndex()"><!-- --></A><H3>
createInvertedIndex</H3>
<PRE>
public void <B>createInvertedIndex</B>()</PRE>
<DL>
<DD>Creates the inverted index using the already created direct index,
 document index and lexicon.
<P>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="createPointerForTerm(org.terrier.structures.LexiconEntry)"><!-- --></A><H3>
createPointerForTerm</H3>
<PRE>
protected gnu.trove.TIntArrayList[] <B>createPointerForTerm</B>(<A HREF="../../../../org/terrier/structures/LexiconEntry.html" title="class in org.terrier.structures">LexiconEntry</A>&nbsp;le)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="scanLexiconForPointers(long, java.util.Iterator, gnu.trove.TIntIntHashMap, java.util.ArrayList)"><!-- --></A><H3>
scanLexiconForPointers</H3>
<PRE>
protected <A HREF="../../../../org/terrier/structures/indexing/InvertedIndexBuilder.IntLongTuple.html" title="class in org.terrier.structures.indexing">InvertedIndexBuilder.IntLongTuple</A> <B>scanLexiconForPointers</B>(long&nbsp;PointersToProcess,
                                                                   java.util.Iterator&lt;java.util.Map.Entry&lt;java.lang.String,<A HREF="../../../../org/terrier/structures/LexiconEntry.html" title="class in org.terrier.structures">LexiconEntry</A>&gt;&gt;&nbsp;lexiconStream,
                                                                   gnu.trove.TIntIntHashMap&nbsp;codesHashMap,
                                                                   java.util.ArrayList&lt;gnu.trove.TIntArrayList[]&gt;&nbsp;tmpStorageStorage)
                                                            throws java.io.IOException</PRE>
<DL>
<DD>Iterates through the lexicon, until it has reached the given number of pointers
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>PointersToProcess</CODE> - Number of pointers to stop reading the lexicon after<DD><CODE>lexiconStream</CODE> - the lexicon input stream to read<DD><CODE>codesHashMap</CODE> - <DD><CODE>tmpStorageStorage</CODE> - 
<DT><B>Returns:</B><DD>IntLongTuple number of terms, number of pointers
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="scanLexiconForTerms(int, java.util.Iterator, gnu.trove.TIntIntHashMap, gnu.trove.TIntArrayList[][])"><!-- --></A><H3>
scanLexiconForTerms</H3>
<PRE>
protected <A HREF="../../../../org/terrier/structures/indexing/InvertedIndexBuilder.IntLongTuple.html" title="class in org.terrier.structures.indexing">InvertedIndexBuilder.IntLongTuple</A> <B>scanLexiconForTerms</B>(int&nbsp;_processTerms,
                                                                java.util.Iterator&lt;java.util.Map.Entry&lt;java.lang.String,<A HREF="../../../../org/terrier/structures/LexiconEntry.html" title="class in org.terrier.structures">LexiconEntry</A>&gt;&gt;&nbsp;lexiconStream,
                                                                gnu.trove.TIntIntHashMap&nbsp;codesHashMap,
                                                                gnu.trove.TIntArrayList[][]&nbsp;tmpStorage)
                                                         throws java.io.IOException</PRE>
<DL>
<DD>Iterates through the lexicon, until it has reached the given number of terms
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>_processTerms</CODE> - Number of terms to stop reading the lexicon after<DD><CODE>lexiconStream</CODE> - the lexicon input stream to read<DD><CODE>codesHashMap</CODE> - mapping of termids to which offset in the storage array for terms to be processed this iteration<DD><CODE>tmpStorage</CODE> - place to put postings for this iteration
<DT><B>Returns:</B><DD>IntLongTuple number of terms, number of pointers
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="traverseDirectFile(gnu.trove.TIntIntHashMap, gnu.trove.TIntArrayList[][])"><!-- --></A><H3>
traverseDirectFile</H3>
<PRE>
protected void <B>traverseDirectFile</B>(gnu.trove.TIntIntHashMap&nbsp;codesHashMap,
                                  gnu.trove.TIntArrayList[][]&nbsp;tmpStorage)
                           throws java.io.IOException</PRE>
<DL>
<DD>Traverses the direct index and creates the inverted index entries 
 for the terms specified in the codesHashMap and tmpStorage.
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>tmpStorage</CODE> - TIntArrayList[][] an array of the inverted index entries to store<DD><CODE>codesHashMap</CODE> - a mapping from the term identifiers to the index 
                in the tmpStorage matrix.
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE> - if there is a problem while traversing the direct index.</DL>
</DD>
</DL>
<HR>

<A NAME="writeInvertedFilePart(java.io.DataOutputStream, gnu.trove.TIntArrayList[][], int)"><!-- --></A><H3>
writeInvertedFilePart</H3>
<PRE>
protected long <B>writeInvertedFilePart</B>(java.io.DataOutputStream&nbsp;dos,
                                     gnu.trove.TIntArrayList[][]&nbsp;tmpStorage,
                                     int&nbsp;_processTerms)
                              throws java.io.IOException</PRE>
<DL>
<DD>Writes the section of the inverted file
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>dos</CODE> - a temporary data structure that contains the offsets in the inverted
  index for each term.<DD><CODE>tmpStorage</CODE> - Occurrences information, as described in traverseDirectFile().
  This data is consumed by this method - once this method has been called, all
  the data in tmpStorage will be destroyed.<DD><CODE>_processTerms</CODE> - The number of terms being processed in this iteration.
<DT><B>Returns:</B><DD>the number of tokens processed in this iteration
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<HR>

<A NAME="displayMemoryUsage(java.lang.Runtime)"><!-- --></A><H3>
displayMemoryUsage</H3>
<PRE>
public static void <B>displayMemoryUsage</B>(java.lang.Runtime&nbsp;r)</PRE>
<DL>
<DD>display memory usage
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>r</CODE> - </DL>
</DD>
</DL>
<HR>

<A NAME="getLexOutputStream(java.lang.String)"><!-- --></A><H3>
getLexOutputStream</H3>
<PRE>
protected <A HREF="../../../../org/terrier/structures/LexiconOutputStream.html" title="class in org.terrier.structures">LexiconOutputStream</A>&lt;java.lang.String&gt; <B>getLexOutputStream</B>(java.lang.String&nbsp;_structureName)
                                                            throws java.io.IOException</PRE>
<DL>
<DD>get LexiconOutputStream
<P>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>_structureName</CODE> - 
<DT><B>Returns:</B><DD>LexiconOutputStream<String>
<DT><B>Throws:</B>
<DD><CODE>java.io.IOException</CODE></DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=2 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="class-use/InvertedIndexBuilder.html"><FONT CLASS="NavBarFont1"><B>Use</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../../org/terrier/structures/indexing/FieldLexiconMap.html" title="class in org.terrier.structures.indexing"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../../org/terrier/structures/indexing/InvertedIndexBuilder.IntLongTuple.html" title="class in org.terrier.structures.indexing"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../../index.html?org/terrier/structures/indexing/InvertedIndexBuilder.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="InvertedIndexBuilder.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>


</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;<A HREF="#nested_class_summary">NESTED</A>&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>
<a href='http://terrier.org/'>Terrier</a> 3.5. Copyright &copy; 2004-2011 <a href='http://www.gla.ac.uk/'>University of Glasgow</a>
</BODY>
</HTML>
